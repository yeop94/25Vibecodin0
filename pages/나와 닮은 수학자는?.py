import streamlit as st

# ---------- 페이지 설정 ----------
st.set_page_config(
    page_title="나와 닮은 수학자는?",
    page_icon="🧠",
    layout="centered",
)

# ---------- 스타일 정의 ----------
st.markdown("""
    <style>
    .title {
        font-size: 36px;
        color: #4B0082;
        text-align: center;
        margin-bottom: 10px;
    }
    .subtitle {
        font-size: 18px;
        color: #666666;
        text-align: center;
        margin-bottom: 30px;
    }
    .card {
        background-color: #FFF5FB;
        border: 1px solid #FADADD;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 2px 2px 8px rgba(0,0,0,0.05);
        margin-top: 20px;
    }
    .mbti-title {
        font-size: 24px;
        color: #FF69B4;
        margin-bottom: 15px;
    }
    .mbti-text {
        font-size: 16px;
        line-height: 1.7;
        color: #444444;
    }
    </style>
""", unsafe_allow_html=True)

# ---------- 제목 출력 ----------
st.markdown("<div class='title'>🧠 나와 닮은 수학자는 누구일까?</div>", unsafe_allow_html=True)
st.markdown("<div class='subtitle'>MBTI를 선택하면 당신과 닮은 수학자를 알려드릴게요!</div>", unsafe_allow_html=True)

# ---------- MBTI 선택 ----------
mbti = st.selectbox("👇 MBTI를 선택하세요", [
    "INTJ", "INTP", "ENTP", "ENTJ",
    "INFJ", "INFP", "ENFP", "ENFJ",
    "ISTJ", "ISFJ", "ESTJ", "ESFJ",
    "ISTP", "ISFP", "ESTP", "ESFP"
])

# ---------- MBTI별 설명  ----------
mbti_texts = {
    "INTJ": """<b>INTJ – 전략적인 혁신가</b>  
당신은 INTJ, 치밀한 전략가입니다.  
당신과 닮은 수학자는 <b>아이작 뉴턴</b>!
미적분학을 창시하고, 우주의 법칙을 수식으로 표현한 위대한 사상가죠.  
혼자서 깊이 사색하며 체계적인 이론을 세운 그의 모습은
완벽을 추구하는 INTJ와 꼭 닮았습니다.  
논리와 통찰을 무기로 세상을 보는 당신, 이미 수학자의 자질이 충분해요!""",

    "INTP": """<b>INTP – 논리적 사색가</b> 
당신은 INTP, 복잡한 아이디어에 매력을 느끼는 분석가입니다.  
당신과 닮은 수학자는 <b>쿠르트 프리드리히 괴델</b>!
‘수학은 완벽하다’는 믿음을 뒤엎은 불완전성 정리를 제시했죠.  
끊임없이 질문을 던지고 깊이 파고드는 그의 태도는, INTP의 본질을 그대로 보여줍니다.  
당신의 끝없는 호기심은 수학이라는 세계에서 빛을 발할 거예요.""",

    "ENTP": """<b>ENTP – 창의적인 도전자</b>  
당신은 ENTP, 호기심과 유머가 넘치는 혁신가입니다.  
당신과 닮은 수학자는 <b>존 폰 노이만</b>!
게임이론, 컴퓨터 구조 등 시대를 앞선 아이디어로 수학계를 뒤흔들었죠.
아이디어가 끊임없이 샘솟는 당신!
새로운 개념을 두려워하지 않는 그의 모습이 꼭 당신 같아요.
무한한 창의력으로 수학을 넘나들어보세요!""",

    "ENTJ": """<b>ENTJ – 체계적인 리더</b>  
당신은 ENTJ, 목표를 향해 나아가는 전략가형 리더입니다.  
당신과 닮은 수학자는 <b>르네 데카르트</b>!
좌표평면을 창시하고 기하학과 대수학을 연결한 구조 설계자죠.  
효율성과 체계를 중시하는 그의 사고방식은 ENTJ 특유의 논리성과 리더십과 닮았습니다.  
당신의 명확한 사고는 수학을 새롭게 정리할 힘이 있어요.""",

    "INFJ": """<b>INFJ – 통찰하는 이상주의자</b>  
당신은 INFJ, 깊은 직관으로 진실을 꿰뚫는 이상주의자입니다.  
당신과 닮은 수학자는 <b>블레즈 파스칼</b>!
삼각형을 통해 수를, ‘내기’를 통해 철학을 설명한 통찰력의 소유자죠.  
보이는 세계 뒤에 감춰진 진실을 찾으려는 그의 태도는 INFJ의 영적 직관과 잘 어울립니다.  
수학을 통해 삶의 의미를 찾아보는 건 어떨까요?""",

    "INFP": """<b>INFP – 낭만적인 혁명가</b>  
당신은 INFP, 열정과 이상을 품은 창의적인 탐색가입니다.  
당신과 닮은 수학자는 <b>에바리스트 갈루아</b>!
20세에 요절했지만 ‘갈루아 이론’으로 현대 수학의 토대를 세운 천재였죠.  
당신처럼 신념에 충실하고 감성적인 그는, 세상에 자신만의 발자국을 남기고자 했습니다.  
당신의 열정도 언젠가 수학이라는 꽃으로 피어날 거예요.""",

    "ENFP": """<b>ENFP – 호기심 많은 탐험가</b>  
당신은 ENFP, 자유로운 사고와 에너지로 가득 찬 탐험가입니다.  
당신과 닮은 수학자는 <b>피타고라스</b>!
모든 것을 수로 설명하려 했던 철학적 수학자죠.  
세상을 새롭게 바라보고 의미를 부여하려는 피타고라스의 태도는 ENFP의 상상력과 닮았습니다.  
재미있게, 그리고 자유롭게 수학을 탐험해보세요!""",

    "ENFJ": """<b>ENFJ – 가르치는 비전가</b>  
당신은 ENFJ, 사람과 세상을 연결하는 따뜻한 리더입니다.  
당신과 닮은 수학자는 <b>페터 구스타프 르죈 디리클레</b>!
수학의 함수 개념을 명확히 하고, 후학 양성에도 힘쓴 교육자였습니다.  
세상을 구조적으로 이해하면서도 인간적인 따뜻함을 잃지 않는 그의 태도는 ENFJ와 닮았어요.  
당신의 리더십은 수학을 통해 더 많은 사람들과 연결될 수 있어요.""",

    "ISTJ": """<b>ISTJ – 신중한 완벽주의자</b>  
당신은 ISTJ, 책임감 있고 철저한 분석가입니다.  
당신과 닮은 수학자는 <b>카를 프리드리히 가우스</b>!
'수학의 왕'이라 불리며, 꼼꼼하게 이론을 쌓아 올렸죠.  
디테일에 강하고 완성도를 추구하는 그의 태도는 ISTJ의 대표적인 특성입니다.  
탄탄한 사고력으로 수학의 기초를 다지는 데 당신만 한 사람이 없어요!""",

    "ISFJ": """<b>ISFJ – 조용한 헌신가</b>  
당신은 ISFJ, 안정과 조화를 중시하는 보호자형입니다.  
당신과 닮은 수학자는 <b>소피 제르맹</b>!
여성이라는 이유로 수학을 금지당했지만, 끝까지 논문을 발표한 의지의 상징입니다.  
당신처럼 조용하지만 깊이 있는 열정을 가진 사람은 수학계에서도 귀중한 존재예요.  
포기하지 않는 태도, 그것이 곧 수학자의 자질이랍니다.""",

    "ESTJ": """<b>ESTJ – 체계적 실천가</b>  
당신은 ESTJ, 구조와 질서를 중시하는 실행가입니다.  
당신과 닮은 수학자는 <b>데이비드 힐베르트</b>!
수학을 체계화하고 23개의 문제를 제시하며 후세에 과제를 남겼죠.  
논리와 질서를 사랑하는 ESTJ의 성향이 힐베르트의 업적 속에 녹아 있습니다.  
당신의 실천력은 수학을 정복하는 데 강력한 무기가 될 거예요!""",

    "ESFJ": """<b>ESFJ – 따뜻한 교육자</b>  
당신은 ESFJ, 다른 사람의 성장을 돕는 다정한 안내자입니다.  
당신과 닮은 수학자는 <b>유클리드</b>!
‘기하학의 아버지’로서 후대에게 수학을 설명하고 가르친 대표적인 교육자죠.  
구조를 세우고 타인에게 나누는 그의 태도는 ESFJ의 마음과 잘 어울립니다.  
당신의 친절한 이성과 배려는 수학을 더 따뜻하게 만들어줄 거예요!""",

    "ISTP": """<b>ISTP – 실용적 문제 해결사</b>  
당신은 ISTP, 분석적이고 효율적인 수학적 손을 가진 실천가입니다.  
당신과 닮은 수학자는 <b>레온하르트 오일러</b>!
지금까지도 수많은 수학 기호와 공식을 만든 다작의 천재죠.  
복잡한 문제도 깔끔하게 풀어내는 그의 접근 방식은 ISTP의 본능과 닮았습니다.  
손에 잡히는 논리, 그것이 당신의 무기입니다.""",

    "ISFP": """<b>ISFP – 감성적 직관가</b>  
당신은 ISFP, 조용하고 섬세하지만 깊은 창의력을 지닌 예술가형입니다.  
당신과 닮은 수학자는 <b>피에르 드 페르마</b>!
‘페르마의 마지막 정리’로 수백 년간 수학계를 골칫거리로 남긴 고독한 천재죠.  
자신만의 방식으로 문제를 탐구한 그는, ISFP처럼 자유로운 영혼이었습니다.  
당신만의 시선으로 수학을 바라보세요.""",

    "ESTP": """<b>ESTP – 즉흥적 해결사</b>  
당신은 ESTP, 민첩하고 대담하게 문제를 푸는 현실주의자입니다.  
당신과 닮은 수학자는 <b>조제프 푸리에</b>!
열전도 방정식을 풀다가 ‘푸리에 급수’라는 혁신을 만들어낸 인물이죠.  
실용적이고 현장감 넘치는 수학자였던 그는, ESTP의 본능을 완벽하게 대변합니다.  
즉각적인 통찰이 당신의 수학적 재능을 이끌 거예요!""",

    "ESFP": """<b>ESFP – 열정적인 발명가</b>  
당신은 ESFP, 생기 넘치고 직관적으로 세상을 느끼는 사람입니다.  
당신과 닮은 수학자는 <b>아르키메데스</b>!
욕조 속에서 “유레카!”를 외친 것으로 유명한 고대의 천재죠.  
감각적이고 창의적인 문제 해결 방식은 ESFP의 밝은 에너지와 닮았습니다.  
즐겁고 신나는 수학, 당신의 손끝에서 시작될 거예요!"""
}

# ---------- 버튼 누르면 결과 카드 출력 ----------
if st.button("🎁 결과 보기"):
    import os

    # 1. 이미지 경로 설정
    image_path = f"images/{mbti}.jpg"

    # 디버깅용 로그
    #st.write("📁 이미지 경로:", image_path)
    #st.write("📂 현재 디렉토리:", os.getcwd())

    # 2. 이미지 파일 존재 여부 확인
    if not os.path.exists(image_path):
        st.error(f"❌ 이미지 파일이 존재하지 않아요: {image_path}")
    else:
        # 3. 이미지 출력
        st.image(image_path, width=300, caption=f"{mbti} 대표 수학자")

        # 4. 텍스트 변환
        converted_text = mbti_texts[mbti].replace('\n', '<br>')

        # 5. 카드 HTML 출력
        html = """
            <div class='card'>
                <div class='mbti-title'>{title}</div>
                <div class='mbti-text'>{text}</div>
            </div>
        """.format(title=mbti + " 유형 분석", text=converted_text)

        st.markdown(html, unsafe_allow_html=True)
